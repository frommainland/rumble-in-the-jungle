import './SwiperIndicator.css'
import { motion, useViewportScroll } from 'framer-motion'
import { useEffect, useState } from 'react'

const SwiperIndicator = (props) => {

    const smooth = [0.4, 0, 0, 1]
    const [anim, setAnim] = useState(false)
    const { scrollX } = useViewportScroll()
    useEffect(() => {
        scrollX.onChange((value) => {
            if (value >= 20) {
                setAnim(true)
            } else {
                setAnim(false)
            }
        });
    }, [scrollX]);

    const start = {
        y: 30,
        scale: .8,
        opacity: 0,
        transition: {
            ease: smooth,
        }
    }


    return (
        <motion.div className='swiperIndicator-wrap' animate={anim ? start : {}}>
            <svg viewBox="0 0 86 47" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_1200_9806)">
                    <rect x="86" width="46.7391" height="86" rx="9.45652" transform="rotate(90 86 0)" fill="#002007" />
                    <path d="M8.92421 42.0645C6.83513 42.0645 5.1416 40.3709 5.1416 38.2818L5.1416 30.7051C5.1416 21.8702 5.1416 16.4086 5.1416 8.45722C5.1416 6.36815 6.83513 4.67315 8.92421 4.67315L77.5438 4.67315C79.6328 4.67315 81.3264 6.36668 81.3264 8.45575L81.3264 38.2818C81.3264 40.3709 79.6328 42.0644 77.5438 42.0644L8.92421 42.0645Z" fill="#002007" />
                    <path d="M5.1416 30.7051L5.6416 30.7051L5.1416 30.7051ZM81.3264 38.2818L81.8264 38.2818L81.3264 38.2818ZM77.5438 42.0644L77.5438 41.5644L77.5438 42.0644ZM77.5438 4.67314L77.5438 4.17314L77.5438 4.67314ZM81.3264 8.45575L80.8264 8.45575L81.3264 8.45575ZM8.92421 4.67314L8.92421 5.17314L8.92421 4.67314ZM8.92421 42.0644L8.92421 42.5644L8.92421 42.0644ZM5.1416 38.2818L4.6416 38.2818L5.1416 38.2818ZM8.92421 5.17314L77.5438 5.17314L77.5438 4.17314L8.92421 4.17314L8.92421 5.17314ZM80.8264 8.45575L80.8264 38.2818L81.8264 38.2818L81.8264 8.45575L80.8264 8.45575ZM77.5438 41.5644L8.92421 41.5644L8.92421 42.5644L77.5438 42.5644L77.5438 41.5644ZM5.6416 38.2818L5.6416 30.7051L4.6416 30.7051L4.6416 38.2818L5.6416 38.2818ZM5.6416 30.7051C5.6416 26.287 5.6416 22.7142 5.6416 19.2498C5.6416 15.7854 5.6416 12.4336 5.6416 8.45722L4.6416 8.45722C4.6416 12.4326 4.6416 15.7865 4.6416 19.2498C4.6416 22.7131 4.6416 26.2881 4.6416 30.7051L5.6416 30.7051ZM80.8264 38.2818C80.8264 40.0948 79.3567 41.5644 77.5438 41.5644L77.5438 42.5644C79.909 42.5644 81.8264 40.6471 81.8264 38.2818L80.8264 38.2818ZM77.5438 5.17314C79.3567 5.17314 80.8264 6.64281 80.8264 8.45575L81.8264 8.45575C81.8264 6.09053 79.909 4.17314 77.5438 4.17314L77.5438 5.17314ZM8.92421 4.17314C6.55874 4.17315 4.6416 6.09225 4.6416 8.45722L5.6416 8.45722C5.6416 6.64403 7.11153 5.17315 8.92421 5.17314L8.92421 4.17314ZM8.92421 41.5644C7.11128 41.5644 5.6416 40.0948 5.6416 38.2818L4.6416 38.2818C4.6416 40.6471 6.55899 42.5644 8.92421 42.5644L8.92421 41.5644Z" fill="#66994D" />
                </g>
                <defs>
                    <clipPath id="clip0_1200_9806">
                        <rect x="86" width="46.7391" height="86" rx="9.45652" transform="rotate(90 86 0)" fill="white" />
                    </clipPath>
                </defs>
            </svg>
            <div className='swiperIndicator-wrap-circle'></div>
        </motion.div>
    )
}

export default SwiperIndicator